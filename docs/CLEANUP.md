# Cleanup / Safe Deletions

This repo is a monorepo with multiple build systems (Next.js, TypeScript, Playwright).

**Rule of thumb:** only delete things that are provably generated (build outputs, caches, test artifacts). Do not delete source directories unless you can prove they are unused (references + scripts + CI) and you’re comfortable with the risk.

## What is always safe to delete

These are **generated artifacts** and are already ignored by `.gitignore`:

- Root: `.cache/`, `test-results/`, `playwright-report/`, `playwright-results.json`
- Backend: `backend/dist/`, `backend/.cache/`, `backend/coverage/`
- Portals: `apps/*/.next/`, `apps/*/out/`, `apps/*/.turbo/`
- Dependency installs: `node_modules/` (root + packages)

If you delete these, they will be regenerated by the next build/test.

### One-command cleanup

From repo root:

- All scopes: `npm run clean`
- Only backend artifacts: `npm run clean:backend`
- Only portal artifacts: `npm run clean:apps`

## How to prove a file/folder is unused (before deleting)

For **source** folders/files (NOT build output), use a staged approach:

1. Search references (imports + runtime paths)
   - `ripgrep`/VS Code search for the filename and key exported symbols.
2. Check scripts/entrypoints
   - `package.json` scripts, `scripts/*.mjs`, Next routes, backend route registrations.
3. Check CI coverage
   - Ensure a clean install + `npm run build` + `npm test` still passes.
4. Delete in a small batch
   - Prefer removing 1 logical group at a time.

## Notes

- The root `.gitignore` is already configured to ignore common outputs (`dist/`, `.next/`, `test-results/`, `.cache/`, etc.).
- If you see generated folders in the repo view, they’re safe to remove locally, but they should never be committed.
